(this["webpackJsonpmern-auth"]=this["webpackJsonpmern-auth"]||[]).push([[0],{199:function(e,t,a){},200:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(71),o=a.n(l),c=a(2),u=a.n(c),s=a(7),m=a(4),i=a(17),p=a(18),d=a(8),f=a.n(d),b=Object(n.createContext)(null);function E(){var e=Object(n.useContext)(b),t=e.userData,a=e.setUserData,l=Object(p.f)();return r.a.createElement("nav",{className:"auth-options"},t.user?r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:function(){return l.push("/coffee")}},"Coffee"),r.a.createElement("button",{onClick:function(){return l.push("/team")}},"Teams"),r.a.createElement("button",{onClick:function(){return l.push("/scoreboard")}},"Scoreboard"),r.a.createElement("button",{onClick:function(){return l.push("/student")}},"Student"),r.a.createElement("button",{onClick:function(){return l.push("/admin")}},"Admin"),r.a.createElement("button",{onClick:function(){a({token:void 0,user:void 0}),localStorage.setItem("auth-token","")}},"Log out")):r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:function(){return l.push("/register")}},"Register"),r.a.createElement("button",{onClick:function(){return l.push("/login")}},"Log in")))}function h(){return r.a.createElement("header",{id:"header"},r.a.createElement(i.b,{to:"/"},r.a.createElement("h1",{className:"title"},"ASU Marketing Coffee Shop")),r.a.createElement(E,null))}function g(e){return r.a.createElement("div",{className:"error-notice"},r.a.createElement("span",null,e.message),r.a.createElement("button",{onClick:e.clearError},"X"))}function v(){var e=Object(n.useState)(),t=Object(m.a)(e,2),a=t[0],l=t[1],o=Object(n.useState)(),c=Object(m.a)(o,2),i=c[0],d=c[1],E=Object(n.useState)(),h=Object(m.a)(E,2),v=h[0],x=h[1],j=Object(n.useContext)(b).setUserData,O=Object(p.f)(),k=function(){var e=Object(s.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,n={email:a,password:i},e.next=5,f.a.post("http://54.244.181.135:3000/users/login",n);case 5:r=e.sent,j({token:r.data.token,user:r.data.user}),localStorage.setItem("auth-token",r.data.token),O.push("/"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),e.t0.response.data.msg&&x(e.t0.response.data.msg);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"page"},r.a.createElement("h2",null,"Log in"),v&&r.a.createElement(g,{message:v,clearError:function(){return x(void 0)}}),r.a.createElement("form",{className:"form",onSubmit:k},r.a.createElement("label",{htmlFor:"login-email"},"Email"),r.a.createElement("input",{id:"login-email",type:"email",onChange:function(e){return l(e.target.value)}}),r.a.createElement("label",{htmlFor:"login-password"},"Password"),r.a.createElement("input",{id:"login-password",type:"password",onChange:function(e){return d(e.target.value)}}),r.a.createElement("input",{type:"submit",value:"Log in"})))}var x=function(e){var t=e.msg;return r.a.createElement("div",{className:"alert alert-info alert-dismissible fade show",role:"alert"},t,r.a.createElement("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7")))},j=function(e){var t=e.percentage;return r.a.createElement("div",{className:"progress"},r.a.createElement("div",{className:"progress-bar progress-bar-striped bg-success",role:"progressbar",style:{width:"".concat(t,"%")}},t,"%"))};function O(){var e=Object(n.useContext)(b).userData,t=e.token,a=Object(n.useState)(),l=Object(m.a)(a,2),o=l[0],c=l[1],i=function(){var e=Object(s.a)(u.a.mark((function e(t){var a,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,a=document.getElementById("textBoxPeriod").value,n={period:a},e.next=6,f.a.post("http://54.244.181.135:3000/users/periodset",n);case 6:r=e.sent,console.log(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log("error in the delete user: "+e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(s.a)(u.a.mark((function e(a){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,n=document.getElementById("textBoxDel").value,r={headers:{"x-auth-token":t,user:n}},e.next=6,f.a.delete("http://54.244.181.135:3000/users/delete",r);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("error in the delete user: "+e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(s.a)(u.a.mark((function e(a){var n,l,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,f.a.get("http://54.244.181.135:3000/users/UserList",{headers:{"x-auth-token":t}});case 4:n=e.sent;try{l=Object.values(n.data),o=l.map((function(e){return r.a.createElement("div",{key:e._id},"_id: ",e._id," name: ",e.displayName," email: ",e.email," teamName:",e.teamNumber)})),c(o)}catch(u){console.log("error happend generating user list: "+u)}e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0.response.data.msg);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),E=Object(n.useState)(""),h=Object(m.a)(E,2),g=h[0],O=h[1],k=Object(n.useState)("Choose File"),y=Object(m.a)(k,2),C=y[0],N=y[1],S=Object(n.useState)({}),w=Object(m.a)(S,2),D=w[0],T=w[1],F=Object(n.useState)(""),P=Object(m.a)(F,2),I=P[0],L=P[1],_=Object(n.useState)(0),U=Object(m.a)(_,2),q=U[0],W=U[1],A=function(){var e=Object(s.a)(u.a.mark((function e(t){var a,n,r,l,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),(a=new FormData).append("file",g),e.prev=3,e.next=6,f.a.post("http://54.244.181.135:3000/users/upload",a,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){W(parseInt(Math.round(100*e.loaded/e.total))),setTimeout((function(){return W(0)}),1e4)}});case 6:n=e.sent,r=n.data,l=r.fileName,o=r.filePath,T({fileName:l,filePath:o}),L("File Uploaded"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),500===e.t0.response.status?L("There was a problem with the server"):L(e.t0.response.data.msg);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}();return e.user?"admin"===e.user.role?r.a.createElement("div",null,"Welcome to the Admin page",r.a.createElement("h2",null,"Set current period",r.a.createElement("input",{type:"text",id:"textBoxPeriod"}),r.a.createElement("button",{onClick:i},"Set Period")),r.a.createElement("h2",null,r.a.createElement("button",{onClick:d},"see all users")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",null,o),r.a.createElement("div",null," to delete a user, paste _id of user",r.a.createElement("input",{type:"text",id:"textBoxDel"}),r.a.createElement("button",{onClick:p},"Submit")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(n.Fragment,null,I?r.a.createElement(x,{msg:I}):null,r.a.createElement("form",{onSubmit:A},r.a.createElement("div",{className:"custom-file mb-4"},r.a.createElement("input",{type:"file",className:"custom-file-input",id:"customFile",onChange:function(e){O(e.target.files[0]),N(e.target.files[0].name)}}),r.a.createElement("label",{className:"custom-file-label",htmlFor:"customFile"},C)),r.a.createElement(j,{percentage:q}),r.a.createElement("input",{type:"submit",value:"Upload",className:"btn btn-primary btn-block mt-4"})),D?r.a.createElement("div",{className:"row mt-5"},r.a.createElement("div",{className:"col-md-6 m-auto"},r.a.createElement("h3",{className:"text-center"},D.fileName),r.a.createElement("img",{style:{width:"100%"},src:D.filePath,alt:""}))):null)):e.user?r.a.createElement("h2",null,"not an admin "):void 0:r.a.createElement(v,null)}function k(){var e=Object(n.useContext)(b).userData;return e.user?"admin"===e.user.role?r.a.createElement(O,null):e.user?r.a.createElement("h1",null,"Welcome ",e.user.displayName," to the Home page "):void 0:r.a.createElement(v,null)}function y(){var e=Object(n.useState)(),t=Object(m.a)(e,2),a=t[0],l=t[1],o=Object(n.useState)(),c=Object(m.a)(o,2),i=c[0],d=c[1],E=Object(n.useState)(),h=Object(m.a)(E,2),v=h[0],x=h[1],j=Object(n.useState)(),O=Object(m.a)(j,2),k=O[0],y=O[1],C=Object(n.useState)(),N=Object(m.a)(C,2),S=N[0],w=N[1],D=Object(n.useState)(),T=Object(m.a)(D,2),F=T[0],P=T[1],I=Object(n.useState)(),L=Object(m.a)(I,2),_=L[0],U=L[1],q=Object(n.useContext)(b).setUserData,W=Object(p.f)(),A=function(){var e=Object(s.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,n={email:a,password:i,passwordCheck:v,displayName:k,teamName:S,teamNumber:F},console.log("team number: "+n.teamNumber),e.next=6,f.a.post("http://54.244.181.135:3000/users/register",n);case 6:return e.next=8,f.a.post("http://54.244.181.135:3000/users/login",{email:a,password:i});case 8:r=e.sent,q({token:r.data.token,user:r.data.user}),localStorage.setItem("auth-token",r.data.token),W.push("/"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),e.t0.response.data.msg&&U(e.t0.response.data.msg);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"page"},r.a.createElement("h2",null,"Register"),_&&r.a.createElement(g,{message:_,clearError:function(){return U(void 0)}}),r.a.createElement("form",{className:"form",onSubmit:A},r.a.createElement("label",{htmlFor:"register-email"},"Email"),r.a.createElement("input",{id:"register-email",type:"email",onChange:function(e){return l(e.target.value)}}),r.a.createElement("label",{htmlFor:"register-password"},"Password"),r.a.createElement("input",{id:"register-password",type:"password",onChange:function(e){return d(e.target.value)}}),r.a.createElement("input",{type:"password",placeholder:"Verify password",onChange:function(e){return x(e.target.value)}}),r.a.createElement("label",{htmlFor:"register-display-name"},"Display name"),r.a.createElement("input",{id:"register-display-name",type:"text",onChange:function(e){return y(e.target.value)}}),r.a.createElement("label",{htmlFor:"register-team-name"},"Team name"),r.a.createElement("input",{id:"register-team-name",type:"text",onChange:function(e){return w(e.target.value)}}),r.a.createElement("label",{htmlFor:"register-team-number"},"Team number"),r.a.createElement("input",{id:"register-team-number",type:"text",onChange:function(e){return P(e.target.value)}}),r.a.createElement("input",{type:"submit",value:"Register"})))}var C=a(74);function N(){var e=Object(n.useState)(),t=Object(m.a)(e,2),a=t[0],l=t[1],o=Object(n.useState)(),c=Object(m.a)(o,2),i=(c[0],c[1]),p=Object(n.useContext)(b).userData,d=p.token,E=function(){var e=Object(s.a)(u.a.mark((function e(t){var a,n,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,f.a.get("http://54.244.181.135:3000/users/UserList",{headers:{"x-auth-token":d}});case 3:a=e.sent,n=Object.values(a.data),console.log(n),o=n.map((function(e){return r.a.createElement("div",{key:e._id},"_id: ",e._id," name: ",e.displayName," email: ",e.email," team number:",e.teamNumber," totalscore:",e.total_score," arr:",e.arr)})),l(o),i(n),console.log("the total score"),console.log(n[2].total_score),console.log("team1 array"),console.log(n[1].arr[0]),console.log(n[1].arr[1]),console.log(n[1].arr[2]),console.log(n[1].arr[3]),console.log(n[1].arr[4]);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return p.user?r.a.createElement("div",null,r.a.createElement("h1",null,"Welcome ",p.user.displayName," to the scoreboard page "),r.a.createElement("div",null,r.a.createElement(C.Line,{data:{labels:["Period 0","Period 1","Period 2","Period 3","Period 4"],datasets:[{label:"Team 1",fill:!1,lineTension:.5,backgroundColor:"rgba(75,192,192,1)",borderColor:"rgba(255,0,0,1)",borderWidth:2},{label:"Team 14",fill:!1,lineTension:.5,backgroundColor:"rgba(75,192,192,1)",borderColor:"rgba(0,255,0,1)",borderWidth:2,data:[51,87,91,67,71]},{label:"Team 27",fill:!1,lineTension:.5,backgroundColor:"rgba(75,192,192,1)",borderColor:"rgba(0,0,255,1)",borderWidth:2,data:[61,74,67,84,65]}]},options:{title:{display:!0,text:"Scores for Top 3 Teams",fontSize:20},legend:{display:!0,position:"right"}}})),r.a.createElement("br",null),r.a.createElement("button",{onClick:E},"see list"),r.a.createElement("div",null,a),r.a.createElement("br",null)):r.a.createElement(v,null)}var S=a(11),w=(a(196),a(75)),D=a(202),T=a(203);function F(){var e,t=Object(n.useContext)(b).userData,a=(t.token,Object(w.a)()),l=a.register,o=a.handleSubmit,c=Object(n.useState)(0),i=Object(m.a)(c,2),d=i[0],E=i[1],h=Object(p.f)(),g=function(){var e=Object(s.a)(u.a.mark((function e(a){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a),n=t.user.id,e.next=4,f.a.post("http://54.244.181.135:3000/users/teamorder",a,{headers:{id:n}});case 4:r=e.sent,E(r.data.msg);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return t.user?r.a.createElement("div",null,r.a.createElement(D.a,{onSubmit:o(g)},r.a.createElement(D.a.Group,{controlId:"Coffee1"},r.a.createElement(D.a.Label,null,"Coffee1"),r.a.createElement(D.a.Control,{name:"coffee1",ref:l,placeholder:"quanity"}),r.a.createElement(D.a.Text,{className:"text-muted"},"please enter your order quantity")),r.a.createElement(D.a.Group,{controlId:"Coffee2"},r.a.createElement(D.a.Label,null,"Coffee2"),r.a.createElement(D.a.Control,{name:"coffee2",ref:l,placeholder:"quanity"}),r.a.createElement(D.a.Text,{className:"text-muted"},"please enter your order quantity")),r.a.createElement(D.a.Group,{controlId:"Coffee3"},r.a.createElement(D.a.Label,null,"Coffee3"),r.a.createElement(D.a.Control,{name:"coffee3",ref:l,placeholder:"quanity"}),r.a.createElement(D.a.Text,{className:"text-muted"},"please enter your order quantity")),r.a.createElement(D.a.Group,{controlId:"Coffee4"},r.a.createElement(D.a.Label,null,"Coffee4"),r.a.createElement(D.a.Control,{name:"coffee4",ref:l,placeholder:"quanity"}),r.a.createElement(D.a.Text,{className:"text-muted"},"please enter your order quantity")),r.a.createElement(D.a.Group,{controlId:"Coffee5"},r.a.createElement(D.a.Label,null,"Coffee5"),r.a.createElement(D.a.Control,{name:"coffee5",ref:l,placeholder:"quanity"}),r.a.createElement(D.a.Text,{className:"text-muted"},"please enter your order quantity")),r.a.createElement(T.a,{variant:"primary",type:"submit"},"Submit")),"You scored: ",d,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("iframe",(e={id:"test",frameborder:"0",width:"75%",height:"500px",src:"https://repl.it/@AlecDonovan1/CPMATemplate?lite=true"},Object(S.a)(e,"frameborder","200"),Object(S.a)(e,"margin","-100px"),e)),r.a.createElement("button",{onClick:function(){return h.push("/coffee1")}},"Coffee_demo")):r.a.createElement(v,null)}function P(){var e=Object(n.useContext)(b).userData,t=e.token,a=Object(n.useState)(),l=Object(m.a)(a,2),o=l[0],c=l[1];console.log(t);var i=function(){var a=Object(s.a)(u.a.mark((function a(n){var l,o,s,m,i,d,b;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,f.a.get("http://54.244.181.135:3000/users/UserList",{headers:{"x-auth-token":t}});case 2:for(l=a.sent,o=Object.values(l.data),s=o.map((function(e){return r.a.createElement("div",{key:e._id},"_id: ",e._id," name: ",e.displayName," email: ",e.email," teamName:",e.teamNumber)})),console.log(s),m=[],d=0;d<s.length;d++)0===s[d].props.children[1].localeCompare(e.user.id)&&(i=s[d].props.children[7]);for(b=0;b<s.length;b++)s[b].props.children[7]==i&&m.push(s[b]);return c(m),a.abrupt("return",p);case 11:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),p=function(e){if(console.log(e),!e)return r.a.createElement("tr",null);var t=[];console.log(e);for(var a=0;a<e.length;a++)t[a]=r.a.createElement("tr",null,r.a.createElement("td",null,e[a].props.children[3]),r.a.createElement("td",null,e[a].props.children[5]),r.a.createElement("td",null,e[a].props.children[7]));return t};return e.user?r.a.createElement("div",null,r.a.createElement("h2",null,"Team info page"),r.a.createElement("h2",null,r.a.createElement("button",{onClick:i},"see all users")),r.a.createElement("div",null,console.log(o)),r.a.createElement("table",{id:"student-info"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Email"),r.a.createElement("th",null,"Team Number"))),r.a.createElement("tbody",null,p(o)))):r.a.createElement(v,null)}function I(){var e=Object(n.useContext)(b).userData;return e.user?r.a.createElement("div",null,r.a.createElement("h1",null,"Welcome ",e.user.displayName," to the team page "),r.a.createElement(P,null)):r.a.createElement(v,null)}function L(){var e=Object(n.useContext)(b).userData;return e.user?r.a.createElement("div",null,r.a.createElement("h2",null,"Student info page"),r.a.createElement("table",{id:"student-info"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Email"),r.a.createElement("th",null,"Team Name"),r.a.createElement("th",null,"Team Number"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,e.user.displayName),r.a.createElement("td",null,e.user.email),r.a.createElement("td",null,e.user.teamName),r.a.createElement("td",null,e.user.teamNumber))))):r.a.createElement(v,null)}a(199);function _(){var e=Object(n.useState)({token:void 0,user:void 0,role:"2"}),t=Object(m.a)(e,2),a=t[0],l=t[1];return Object(n.useEffect)((function(){document.title="ASU Marketing Coffee Shop",function(){var e=Object(s.a)(u.a.mark((function e(){var t,a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(t=localStorage.getItem("auth-token"))&&(localStorage.setItem("auth-token",""),t=""),e.next=4,f.a.post("http://54.244.181.135:3000/users/tokenIsValid",null,{headers:{"x-auth-token":t}});case 4:if(a=e.sent,console.log("token: ",t),!a.data){e.next=12;break}return e.next=9,f.a.get("http://54.244.181.135:3000/users/",{headers:{"x-auth-token":t}});case 9:n=e.sent,console.log("userRES!!!",n),l({token:t,user:n.data});case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,null,r.a.createElement(b.Provider,{value:{userData:a,setUserData:l}},r.a.createElement(h,null),r.a.createElement("div",{className:"container"},r.a.createElement(p.c,null,r.a.createElement(p.a,{exact:!0,path:"/",component:k}),r.a.createElement(p.a,{path:"/login",component:v}),r.a.createElement(p.a,{path:"/register",component:y}),r.a.createElement(p.a,{path:"/admin",component:O}),r.a.createElement(p.a,{path:"/scoreboard",component:N}),r.a.createElement(p.a,{path:"/team",component:I}),r.a.createElement(p.a,{path:"/coffee",component:F}),r.a.createElement(p.a,{path:"/coffee",component:F}),r.a.createElement(p.a,{path:"/student",component:L}))))))}o.a.render(r.a.createElement(_,null),document.querySelector("#root"))},76:function(e,t,a){e.exports=a(200)}},[[76,1,2]]]);
//# sourceMappingURL=main.9a831f60.chunk.js.map